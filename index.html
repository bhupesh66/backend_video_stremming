<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="telemetry-plugin.js"></script>

<video id="video" controls></video>

<script>
  const video = document.getElementById("video");
  const hls = new Hls();

  hls.loadSource("https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8");
  hls.attachMedia(video);

  const telemetry = new TelemetryPlugin(hls, video, "user123", {
      endpoint: "http://localhost:3000/telemetry",
      flushIntervalMs: 5000,
      maxBatchSize: 20,
      maxQueueSize: 1000,
      maxRetries: 3,
      backoffBaseMs: 1000
  });
</script>
